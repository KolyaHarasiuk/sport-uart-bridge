# S-Port to UART Bridge –¥–ª—è FPV

–ö–æ–Ω–≤–µ—Ä—Ç–æ—Ä S-Port (—ñ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–∏–π, half-duplex) ‚Üî UART (–Ω–æ—Ä–º–∞–ª—å–Ω–∏–π, full-duplex) –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó —á–µ—Ä–µ–∑ –æ–ø—Ç–æ–≤–æ–ª–æ–∫–Ω–æ.

## –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è

–î–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ S-Port —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—é –∑ –∞–ø–∞—Ä–∞—Ç—É—Ä–∏ FPV –≤ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π ELRS –º–æ–¥—É–ª—å —á–µ—Ä–µ–∑ –º–µ–¥—ñ–∞–∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä —ñ –æ–ø—Ç–æ–≤–æ–ª–æ–∫–Ω–æ, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ —Ä–æ–±–æ—Ç—É Lua —Å–∫—Ä–∏–ø—Ç—ñ–≤.

## –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

### ESP32 #1 (–±—ñ–ª—è –∞–ø–∞—Ä–∞—Ç—É—Ä–∏)
```
–ê–ø–∞—Ä–∞—Ç—É—Ä–∞ S-Port ‚îÄ‚îÄ‚îÄ> GPIO 10 (half-duplex, —ñ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–∏–π)
–ú–µ–¥—ñ–∞–∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä TX ‚îÄ‚îÄ> GPIO 16 (RX)
–ú–µ–¥—ñ–∞–∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä RX <‚îÄ‚îÄ GPIO 17 (TX)
GND ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> GND
5V ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> VIN –∞–±–æ 5V
```

### ESP32 #2 (–±—ñ–ª—è ELRS –º–æ–¥—É–ª—è)
```
–ú–µ–¥—ñ–∞–∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä TX ‚îÄ‚îÄ> GPIO 16 (RX)
–ú–µ–¥—ñ–∞–∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä RX <‚îÄ‚îÄ GPIO 17 (TX)
ELRS –º–æ–¥—É–ª—å S-Port <‚îÄ> GPIO 10 (half-duplex, —ñ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–∏–π)
GND ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> GND
5V ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> VIN –∞–±–æ 5V
```

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

- **S-Port —à–≤–∏–¥–∫—ñ—Å—Ç—å:** 400000 baud (FrSky high-speed)
- **UART —à–≤–∏–¥–∫—ñ—Å—Ç—å:** 400000 baud
- **S-Port —Ñ–æ—Ä–º–∞—Ç:** 8N1, —ñ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–∏–π, half-duplex
- **UART —Ñ–æ—Ä–º–∞—Ç:** 8N1, –Ω–æ—Ä–º–∞–ª—å–Ω–∏–π, full-duplex

## –ü—Ä–æ—à–∏–≤–∫–∞

### –î–ª—è ESP32 DevKit V1:
```bash
pio run -e esp32dev -t upload
```

### –î–ª—è ESP32-C3 SuperMini:
1. –†–æ–∑–∫–æ–º–µ–Ω—Ç—É–π —Å–µ–∫—Ü—ñ—é `[env:esp32-c3-devkitm-1]` –≤ `platformio.ini`
2. –ó–∞–∫–æ–º–µ–Ω—Ç—É–π —Å–µ–∫—Ü—ñ—é `[env:esp32dev]`
3. –ü—Ä–æ—à–∏–≤–∞–π:
```bash
pio run -e esp32-c3-devkitm-1 -t upload
```

## –î–µ–±–∞–≥

–ü—ñ–¥–∫–ª—é—á–∏ Serial Monitor (115200 baud) —â–æ–± –±–∞—á–∏—Ç–∏ –ª–æ–≥–∏:
```bash
pio device monitor
```

–†–æ–∑–∫–æ–º–µ–Ω—Ç—É–π —Ä—è–¥–∫–∏ –∑ `Serial.printf()` –≤ –∫–æ–¥—ñ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ç—Ä–∞—Ñ—ñ–∫—É.

## –í–∞–∂–ª–∏–≤–æ!

- **–û–¥–Ω–∞ –ø—Ä–æ—à–∏–≤–∫–∞** –ø—Ä–∞—Ü—é—î –Ω–∞ –æ–±–æ—Ö ESP32 (–±—ñ–ª—è –∞–ø–∞—Ä–∞—Ç—É—Ä–∏ —ñ –±—ñ–ª—è ELRS)
- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Ä—ñ–∑–Ω—ñ, –∞–ª–µ –ª–æ–≥—ñ–∫–∞ –æ–¥–Ω–∞–∫–æ–≤–∞
- –ë–µ–∑ –∂–æ–¥–Ω–∏—Ö —Ä–µ–∑–∏—Å—Ç–æ—Ä—ñ–≤ - —ñ–Ω–≤–µ—Ä—Å—ñ—è —ñ half-duplex –≤ –∫–æ–¥—ñ
- GPIO 10 –ø—Ä–∞—Ü—é—î —è–∫ –æ–¥–∏–Ω –¥–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—ñ–π –ø—ñ–Ω –¥–ª—è S-Port

## –ü—Ä–∏–º—ñ—Ç–∫–∏

- –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—à ESP32-C3, –ø—ñ–Ω–∏ –º–æ–∂—É—Ç—å –±—É—Ç–∏ —ñ–Ω—à–∏–º–∏. –ü–µ—Ä–µ–≤—ñ—Ä –¥–∞—Ç–∞—à–∏—Ç —Ç–≤–æ—î—ó –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –ø–ª–∞—Ç–∏.
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –ø—ñ–Ω–∏ UART1 —ñ UART2 –º–æ–∂—É—Ç—å –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏—Å—è –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –ø–ª–∞—Ç–∞—Ö ESP32
- –î–ª—è ESP32-C3 SuperMini –ø–µ—Ä–µ–≤—ñ—Ä —è–∫—ñ –ø—ñ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –Ω–∞ —Ç–≤–æ—ó–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ–π –ø–ª–∞—Ç—ñ

## Troubleshooting

**–ù–µ –ø—Ä–∞—Ü—é—î S-Port:**
- –ü–µ—Ä–µ–≤—ñ—Ä —â–æ –ø—ñ–Ω GPIO 10 —Ñ—ñ–∑–∏—á–Ω–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π
- –ü–µ—Ä–µ–≤—ñ—Ä –ø–æ–ª—è—Ä–Ω—ñ—Å—Ç—å (S-Port = Signal, –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä —á–∏ –Ω–µ –ø–µ—Ä–µ–ø–ª—É—Ç–∞–≤ –∑ GND)
- –ü–æ–¥–∏–≤–∏—Å—å –≤ Serial Monitor —á–∏ —î —è–∫–∏–π—Å—å —Ç—Ä–∞—Ñ—ñ–∫

**–ù–µ –ø—Ä–∞—Ü—é—î —á–µ—Ä–µ–∑ –æ–ø—Ç–∏–∫—É:**
- –ü–µ—Ä–µ–≤—ñ—Ä —â–æ –º–µ–¥—ñ–∞–∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∂–∏–≤–ª—è—Ç—å—Å—è
- –ü–µ—Ä–µ–≤—ñ—Ä —â–æ TX –æ–¥–Ω–æ–≥–æ –π–¥–µ –≤ RX —ñ–Ω—à–æ–≥–æ
- –ü–µ—Ä–µ–≤—ñ—Ä —à–≤–∏–¥–∫—ñ—Å—Ç—å (–æ–±–∏–¥–≤—ñ —Å—Ç–æ—Ä–æ–Ω–∏ –º–∞—é—Ç—å –±—É—Ç–∏ 420000)

**Lua —Å–∫—Ä–∏–ø—Ç–∏ –Ω–µ –±–∞—á–∞—Ç—å –º–æ–¥—É–ª—å:**
- –ü–µ—Ä–µ–≤—ñ—Ä —â–æ ELRS –º–æ–¥—É–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ GPIO 10
- –ü–µ—Ä–µ–≤—ñ—Ä —â–æ –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö ELRS –≤–∫–ª—é—á–µ–Ω–æ —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—é
- –°–ø—Ä–æ–±—É–π –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∞–ø–∞—Ä–∞—Ç—É—Ä—É

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

–ö–æ–¥ –≤—ñ–ª—å–Ω–∏–π, —Ä–æ–±–∏ —â–æ —Ö–æ—á–µ—à ü§ò